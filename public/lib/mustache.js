/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
var Mustache="undefined"!==typeof module&&module.exports||{};
(function(e){function r(a){return!RegExp.prototype.test.call(z,a)}function l(a){return'"'+a.replace(A,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"'}function p(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function s(a){return(""+a).replace(/[&<>"'\/]/g,function(a){return B[a]})}function o(a){this.tail=this.string=a;this.pos=0}function h(a,c){this.view=a;this.parent=c;this.clearCache()}function f(){this.clearCache()}function t(a,c){"string"===typeof a&&(a=u(a));
for(var b=['""'],d,i,e=0,g=a.length;e<g;++e)switch(d=a[e],d.type){case "#":case "^":i="#"===d.type?"_section":"_inverted";b.push("r."+i+"("+l(d.value)+", c, function (c, r) {\n  "+t(d.tokens,!0)+"\n})");break;case "{":case "&":case "name":i="name"===d.type?"true":"false";b.push("r._name("+l(d.value)+", c, "+i+")");break;case ">":b.push("r._partial("+l(d.value)+", c)");break;case "text":b.push(l(d.value))}b="return "+b.join(" + ")+";";return c?b:new Function("c, r",b)}function v(a){if(2===a.length)return[RegExp(p(a[0])+
"\\s*"),RegExp("\\s*"+p(a[1]))];throw Error("Invalid tags: "+a.join(" "));}function u(a,c){for(var c=c||e.tags,b=v(c),d=new o(a),i=[],f=[],g=!1,h=!1,j,k;!d.eos();){if(k=d.scanUntil(b[0]))for(var l=0,n=k.length;l<n;++l)if(j=k[l],r(j)?f.push(i.length):h=!0,i.push({type:"text",value:j}),"\n"===j){if(g&&!h)for(;f.length;)i.splice(f.pop(),1);else f=[];h=g=!1}if(!d.scan(b[0]))break;g=!0;j=d.scan(C)||"name";d.scan(D);"="===j?(k=d.scanUntil(w),d.scan(w),d.scanUntil(b[1])):"{"===j?(k=RegExp("\\s*"+p("}"+c[1])),
k=d.scanUntil(k),d.scan(E),d.scanUntil(b[1])):k=d.scanUntil(b[1]);if(!d.scan(b[1]))throw Error("Unclosed tag at "+d.pos);i.push({type:j,value:k});if("name"===j||"{"===j||"&"===j)h=!0;"="===j&&(c=k.split(F),b=v(c))}for(var m,b=0;b<i.length;++b)d=i[b],m&&"text"===m.type&&"text"===d.type?(m.value+=d.value,i.splice(b--,1)):m=d;g=m=[];b=[];for(f=0;f<i.length;++f)switch(d=i[f],d.type){case "#":case "^":d.tokens=[];b.push(d);g.push(d);g=d.tokens;break;case "/":if(0===b.length)throw Error("Unopened section: "+
d.value);g=b.pop();if(g.value!==d.value)throw Error("Unclosed section: "+g.value);g=0<b.length?b[b.length-1].tokens:m;break;default:g.push(d)}if(g=b.pop())throw Error("Unclosed section: "+g.value);return m}function x(a,c,b){return n.compilePartial(a,c,b)}function y(a,c,b){if(b)for(var d in b)x(d,b[d]);return n.render(a,c)}e.name="mustache.js";e.version="0.5.1-dev";e.tags=["{{","}}"];e.parse=u;e.clearCache=function(){n.clearCache()};e.compile=function(a,c){return n.compile(a,c)};e.compilePartial=x;
e.render=y;e.Scanner=o;e.Context=h;e.Renderer=f;e.to_html=function(a,c,b,d){a=y(a,c,b);if("function"===typeof d)d(a);else return a};var D=/\s*/,F=/\s+/,z=/\S/,w=/\s*=/,E=/\s*\}/,C=/#|\^|\/|>|\{|&|=|!/,q=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},A=/[\x00-\x2F\x3A-\x40\x5B-\x60\x7B-\xFF\u2028\u2029]/gm,B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};e.isWhitespace=r;e.isArray=q;e.quote=l;e.escapeRe=p;e.escapeHtml=s;o.prototype.eos=
function(){return""===this.tail};o.prototype.scan=function(a){return(a=this.tail.match(a))&&0===a.index?(this.tail=this.tail.substring(a[0].length),this.pos+=a[0].length,a[0]):null};o.prototype.scanUntil=function(a){var c=this.tail.search(a);switch(c){case -1:a=this.tail;this.pos+=this.tail.length;this.tail="";break;case 0:a=null;break;default:a=this.tail.substring(0,c),this.tail=this.tail.substring(c),this.pos+=c}return a};h.make=function(a){return a instanceof h?a:new h(a)};h.prototype.clearCache=
function(){this._cache={}};h.prototype.push=function(a){return new h(a,this)};h.prototype.lookup=function(a){var c=this._cache[a];if(!c){if("."===a)c=this.view;else for(var b=this;b;){if(0<a.indexOf("."))for(var d=a.split("."),e=0,c=b.view;c&&e<d.length;)c=c[d[e++]];else c=b.view[a];if(null!=c)break;b=b.parent}this._cache[a]=c}"function"===typeof c&&(c=c.call(this.view));return c};f.prototype.clearCache=function(){this._cache={};this._partialCache={}};f.prototype.compile=function(a){var c=t(a),b=
this;return function(a){return c(h.make(a),b)}};f.prototype.compilePartial=function(a,c,b){this._partialCache[a]=this.compile(c,b);return this._partialCache[a]};f.prototype.render=function(a,c){var b=this._cache[a];b||(b=this.compile(a),this._cache[a]=b);return b(c)};f.prototype._section=function(a,c,b){a=c.lookup(a);switch(typeof a){case "object":if(q(a)){for(var d="",e=0,f=a.length;e<f;++e)d+=b(c.push(a[e]),this);return d}return b(c.push(a),this);case "function":var b=b(c,this),g=this;return a.call(c.view,
b,function(a){return g.render(a,c)})||"";default:if(a)return b(c,this)}return""};f.prototype._inverted=function(a,c,b){a=c.lookup(a);return null==a||!1===a||q(a)&&0===a.length?b(c,this):""};f.prototype._partial=function(a,c){var b=this._partialCache[a];return b?b(c,this):""};f.prototype._name=function(a,c,b){a=c.lookup(a);"function"===typeof a&&(a=a.call(c.view));c=null==a?"":""+a;return b?s(c):c};var n=new f})(Mustache);
